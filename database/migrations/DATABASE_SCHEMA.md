# üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö CS2 Match Prediction System

## üìã **–û–±–∑–æ—Ä**

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (3NF) –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ç—á–µ–π CS2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**

### ‚úÖ **–°–æ–±–ª—é–¥–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º**
- **1NF**: –í—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∞—Ç–æ–º–∞—Ä–Ω—ã, –Ω–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –≥—Ä—É–ø–ø
- **2NF**: –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —á–∞—Å—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∫–ª—é—á–µ–π
- **3NF**: –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### üîó **ACID —Å–≤–æ–π—Å—Ç–≤–∞**
- **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤–æ–æ–±—â–µ
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –í—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞
- **–î–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å**: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### üöÄ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JOIN-—ã —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏

## üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü**

### 1. üìö **–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (Reference Tables)**

#### `countries` - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç—Ä–∞–Ω
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
code VARCHAR(3) UNIQUE             -- ISO 3166-1 alpha-3 –∫–æ–¥
name VARCHAR(100)                  -- –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã
flag_url VARCHAR(255)              -- URL —Ñ–ª–∞–≥–∞
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç—Ä–∞–Ω–∞—Ö –∫–æ–º–∞–Ω–¥ –∏ –∏–≥—Ä–æ–∫–æ–≤.

#### `maps` - –ò–≥—Ä–æ–≤—ã–µ –∫–∞—Ä—Ç—ã CS2
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
name VARCHAR(50) UNIQUE            -- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã (de_dust2)
display_name VARCHAR(100)          -- –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (Dust II)
image_url VARCHAR(255)             -- URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
is_active BOOLEAN                  -- –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–∞—Ä—Ç–∞ –≤ –ø—É–ª–µ
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–≥—Ä–æ–≤—ã—Ö –∫–∞—Ä—Ç –¥–ª—è –º–∞—Ç—á–µ–π.

#### `event_types` - –¢–∏–ø—ã —Ç—É—Ä–Ω–∏—Ä–æ–≤
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
name VARCHAR(100) UNIQUE           -- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ —Ç—É—Ä–Ω–∏—Ä–∞
tier VARCHAR(20)                   -- –£—Ä–æ–≤–µ–Ω—å —Ç—É—Ä–Ω–∏—Ä–∞ (S, A, B, C)
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—É—Ä–Ω–∏—Ä–æ–≤ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ—Å—Ç–∏–∂—É.

### 2. üè¢ **–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (Core Entities)**

#### `teams` - –ö–æ–º–∞–Ω–¥—ã CS2
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
hltv_id INTEGER UNIQUE             -- ID –∫–æ–º–∞–Ω–¥—ã –Ω–∞ HLTV.org
name VARCHAR(100)                  -- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
tag VARCHAR(10)                    -- –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–≥ (NAVI, G2)
country_id INTEGER FK              -- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω—É
logo_url VARCHAR(255)              -- URL –ª–æ–≥–æ—Ç–∏–ø–∞
hltv_url VARCHAR(255)              -- –°—Å—ã–ª–∫–∞ –Ω–∞ HLTV
world_ranking INTEGER              -- –ú–∏—Ä–æ–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥
points INTEGER                     -- –†–µ–π—Ç–∏–Ω–≥–æ–≤—ã–µ –æ—á–∫–∏
is_active BOOLEAN                  -- –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–æ–º–∞–Ω–¥–∞
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `hltv_id`, `world_ranking`, `is_active`
- –°–≤—è–∑—å —Å –ø–∞—Ä—Å–µ—Ä–æ–º HLTV —á–µ—Ä–µ–∑ `hltv_id`

#### `players` - –ò–≥—Ä–æ–∫–∏ CS2
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
hltv_id INTEGER UNIQUE             -- ID –∏–≥—Ä–æ–∫–∞ –Ω–∞ HLTV.org
nickname VARCHAR(50)               -- –ò–≥—Ä–æ–≤–æ–π –Ω–∏–∫
real_name VARCHAR(100)             -- –ù–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è
country_id INTEGER FK              -- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω—É
age INTEGER CHECK (age > 0 < 100)  -- –í–æ–∑—Ä–∞—Å—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
avatar_url VARCHAR(255)            -- URL –∞–≤–∞—Ç–∞—Ä–∞
hltv_url VARCHAR(255)              -- –°—Å—ã–ª–∫–∞ –Ω–∞ HLTV
is_active BOOLEAN                  -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∏–≥—Ä–æ–∫
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è  
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤–æ–∑—Ä–∞—Å—Ç
- –°–≤—è–∑—å —Å –ø–∞—Ä—Å–µ—Ä–æ–º —á–µ—Ä–µ–∑ `hltv_id`

#### `team_rosters` - –°–æ—Å—Ç–∞–≤—ã –∫–æ–º–∞–Ω–¥
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
team_id INTEGER FK                 -- –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—É
player_id INTEGER FK               -- –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä–æ–∫–∞
role VARCHAR(50)                   -- –†–æ–ª—å (IGL, AWPer, Support)
is_active BOOLEAN                  -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –≤ —Å–æ—Å—Ç–∞–≤–µ
joined_at TIMESTAMP                -- –î–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
left_at TIMESTAMP NULL             -- –î–∞—Ç–∞ —É—Ö–æ–¥–∞ (NULL –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω)
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ `(team_id, player_id, joined_at)`
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–∞–≤–æ–≤
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã/–∏–≥—Ä–æ–∫–∞

### 3. üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤**

#### `player_statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
player_id INTEGER FK               -- –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä–æ–∫–∞

-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏–∑ HLTV
rating_2_0 DECIMAL(4,3)            -- –†–µ–π—Ç–∏–Ω–≥ 2.0 (1.234)
kd_ratio DECIMAL(4,3)              -- Kill/Death ratio
adr DECIMAL(5,2)                   -- Average Damage per Round
kast DECIMAL(5,2)                  -- KAST percentage
headshot_percentage DECIMAL(5,2)   -- –ü—Ä–æ—Ü–µ–Ω—Ç —Ö–µ–¥—à–æ—Ç–æ–≤

-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
maps_played INTEGER                -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
kills_per_round DECIMAL(4,3)       -- –£–±–∏–π—Å—Ç–≤ –∑–∞ —Ä–∞—É–Ω–¥
assists_per_round DECIMAL(4,3)     -- –ê—Å—Å–∏—Å—Ç–æ–≤ –∑–∞ —Ä–∞—É–Ω–¥
deaths_per_round DECIMAL(4,3)      -- –°–º–µ—Ä—Ç–µ–π –∑–∞ —Ä–∞—É–Ω–¥
saved_by_teammate_per_round DECIMAL(4,3)  -- –°–ø–∞—Å–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥–æ–π
saved_teammates_per_round DECIMAL(4,3)    -- –°–ø–∞—Å–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥—ã

-- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
period_start DATE                  -- –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞
period_end DATE                    -- –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞
last_updated TIMESTAMP             -- –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ `(player_id, period_start, period_end)`
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ø–∞—Ä—Å–µ—Ä–∞ HLTV
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É

### 4. üèÜ **–¢—É—Ä–Ω–∏—Ä—ã –∏ —Å–æ–±—ã—Ç–∏—è**

#### `events` - –¢—É—Ä–Ω–∏—Ä—ã/—Å–æ–±—ã—Ç–∏—è
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
hltv_id INTEGER UNIQUE             -- ID —Å–æ–±—ã—Ç–∏—è –Ω–∞ HLTV.org
name VARCHAR(200)                  -- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞
event_type_id INTEGER FK           -- –¢–∏–ø —Ç—É—Ä–Ω–∏—Ä–∞
start_date DATE                    -- –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
end_date DATE                      -- –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
prize_pool INTEGER                 -- –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ –≤ USD
location VARCHAR(100)              -- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
hltv_url VARCHAR(255)              -- –°—Å—ã–ª–∫–∞ –Ω–∞ HLTV
is_completed BOOLEAN               -- –ó–∞–≤–µ—Ä—à–µ–Ω –ª–∏ —Ç—É—Ä–Ω–∏—Ä
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

### 5. ‚öîÔ∏è **–ú–∞—Ç—á–∏**

#### `matches` - –ú–∞—Ç—á–∏ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
hltv_id INTEGER UNIQUE             -- ID –º–∞—Ç—á–∞ –Ω–∞ HLTV.org
event_id INTEGER FK                -- –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä

-- –£—á–∞—Å—Ç–Ω–∏–∫–∏
team1_id INTEGER FK                -- –ü–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
team2_id INTEGER FK                -- –í—Ç–æ—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞
CHECK (team1_id != team2_id)       -- –ö–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏

-- –†–µ–∑—É–ª—å—Ç–∞—Ç
team1_score INTEGER                -- –°—á–µ—Ç –ø–µ—Ä–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
team2_score INTEGER                -- –°—á–µ—Ç –≤—Ç–æ—Ä–æ–π –∫–æ–º–∞–Ω–¥—ã
winner_id INTEGER FK               -- –ü–æ–±–µ–¥–∏—Ç–µ–ª—å (NULL –µ—Å–ª–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω)
CHECK (winner_id IN (team1_id, team2_id) OR winner_id IS NULL)

-- –î–µ—Ç–∞–ª–∏
match_format VARCHAR(20)           -- Bo1, Bo3, Bo5
match_type VARCHAR(50)             -- Group Stage, Final –∏ —Ç.–¥.
scheduled_at TIMESTAMP             -- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
started_at TIMESTAMP               -- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
ended_at TIMESTAMP                 -- –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è

-- –°—Ç–∞—Ç—É—Å
status VARCHAR(20)                 -- scheduled, live, completed, cancelled
hltv_url VARCHAR(255)              -- –°—Å—ã–ª–∫–∞ –Ω–∞ HLTV
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –ª–æ–≥–∏–∫—É –º–∞—Ç—á–∞
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞—Ç—á–µ–π –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏

#### `match_maps` - –ö–∞—Ä—Ç—ã –≤ –º–∞—Ç—á–∞—Ö
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
match_id INTEGER FK                -- –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç—á
map_id INTEGER FK                  -- –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç—É
map_number INTEGER                 -- –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –≤ –º–∞—Ç—á–µ
CHECK (map_number > 0)             -- –ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º

-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ –∫–∞—Ä—Ç–µ
team1_rounds INTEGER               -- –†–∞—É–Ω–¥—ã –ø–µ—Ä–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
team2_rounds INTEGER               -- –†–∞—É–Ω–¥—ã –≤—Ç–æ—Ä–æ–π –∫–æ–º–∞–Ω–¥—ã
winner_id INTEGER FK               -- –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –∫–∞—Ä—Ç—ã

-- –°—Ç–∞—Ç—É—Å
status VARCHAR(20)                 -- upcoming, live, completed
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ `(match_id, map_number)`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —á–µ—Ä–µ–∑ –ø–æ–¥–∑–∞–ø—Ä–æ—Å
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–∞—Ç—á–∞

### 6. üîÆ **–ü—Ä–æ–≥–Ω–æ–∑—ã**

#### `match_predictions` - –ü—Ä–æ–≥–Ω–æ–∑—ã –æ—Ç ChatGPT
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
match_id INTEGER FK                -- –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç—á (UNIQUE)

-- –ü—Ä–æ–≥–Ω–æ–∑
predicted_winner_id INTEGER FK     -- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å
confidence_percentage DECIMAL(5,2) -- –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0-100%)
CHECK (confidence_percentage >= 0 AND confidence_percentage <= 100)
predicted_score VARCHAR(10)        -- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π —Å—á–µ—Ç (2-1)

-- –¢–µ–∫—Å—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞
prediction_text TEXT               -- –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞
reasoning TEXT                     -- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞
analyzed_factors JSONB             -- JSON —Å —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞

-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞
is_correct BOOLEAN                 -- –í–µ—Ä–µ–Ω –ª–∏ –ø—Ä–æ–≥–Ω–æ–∑ (NULL –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)
actual_winner_id INTEGER FK        -- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å
actual_score VARCHAR(10)           -- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å—á–µ—Ç

created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –û–¥–∏–Ω –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –º–∞—Ç—á (UNIQUE constraint)
- JSONB –¥–ª—è –≥–∏–±–∫–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –ø—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤

### 7. üë• **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø–ª–∞—Ç–µ–∂–∏**

#### `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram –±–æ—Ç–∞
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
telegram_id BIGINT UNIQUE          -- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram

-- –ü—Ä–æ—Ñ–∏–ª—å
username VARCHAR(100)              -- Username –≤ Telegram
first_name VARCHAR(100)            -- –ò–º—è
last_name VARCHAR(100)             -- –§–∞–º–∏–ª–∏—è
email VARCHAR(255) UNIQUE          -- Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

-- –ü–æ–¥–ø–∏—Å–∫–∞
is_premium BOOLEAN DEFAULT FALSE   -- –ü—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å
premium_until TIMESTAMP            -- –î–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–µ–º–∏—É–º

-- –ë–∞–ª–∞–Ω—Å
balance DECIMAL(10,2) DEFAULT 0.00 -- –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CHECK (balance >= 0)               -- –ë–∞–ª–∞–Ω—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
notification_settings JSONB DEFAULT '{}'  -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

-- –°—Ç–∞—Ç—É—Å
is_active BOOLEAN DEFAULT TRUE     -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç
is_banned BOOLEAN DEFAULT FALSE    -- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏

-- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
last_activity TIMESTAMP            -- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
```

#### `payments` - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
```sql
id SERIAL PRIMARY KEY              -- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID
user_id INTEGER FK                 -- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

-- –ü–ª–∞—Ç–µ–∂
amount DECIMAL(10,2)               -- –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
CHECK (amount > 0)                 -- –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π
currency VARCHAR(3) DEFAULT 'USD'  -- –í–∞–ª—é—Ç–∞
payment_type VARCHAR(50)           -- –¢–∏–ø: premium_subscription, balance_topup

-- –°—Ç–∞—Ç—É—Å
status VARCHAR(20) DEFAULT 'pending' -- pending, completed, failed, refunded

-- –í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
external_payment_id VARCHAR(255)   -- ID –≤ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
payment_method VARCHAR(50)         -- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: card, crypto

-- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata JSONB                     -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
created_at TIMESTAMP               -- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at TIMESTAMP               -- –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

## üîç **–ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
```sql
-- –ö–æ–º–∞–Ω–¥—ã
CREATE INDEX idx_teams_hltv_id ON teams(hltv_id);
CREATE INDEX idx_teams_world_ranking ON teams(world_ranking);
CREATE INDEX idx_teams_is_active ON teams(is_active);

-- –ò–≥—Ä–æ–∫–∏  
CREATE INDEX idx_players_hltv_id ON players(hltv_id);
CREATE INDEX idx_players_is_active ON players(is_active);

-- –ú–∞—Ç—á–∏
CREATE INDEX idx_matches_scheduled_at ON matches(scheduled_at);
CREATE INDEX idx_matches_status ON matches(status);
CREATE INDEX idx_matches_teams ON matches(team1_id, team2_id);

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
CREATE INDEX idx_player_statistics_rating ON player_statistics(rating_2_0 DESC);
CREATE INDEX idx_player_statistics_period ON player_statistics(period_start, period_end);

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE INDEX idx_users_telegram_id ON users(telegram_id);
CREATE INDEX idx_users_is_premium ON users(is_premium);
```



## üìä **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤**

### –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-10 –∏–≥—Ä–æ–∫–æ–≤ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É:
```sql
SELECT 
    p.nickname,
    p.real_name,
    c.name as country,
    ps.rating_2_0,
    ps.maps_played
FROM players p
JOIN player_statistics ps ON p.id = ps.player_id
JOIN countries c ON p.country_id = c.id
WHERE ps.period_end = (SELECT MAX(period_end) FROM player_statistics)
ORDER BY ps.rating_2_0 DESC
LIMIT 10;
```

### –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –º–∞—Ç—á–∏ —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏:
```sql
SELECT 
    m.scheduled_at,
    t1.name as team1,
    t2.name as team2,
    e.name as event,
    mp.predicted_winner_id,
    tw.name as predicted_winner,
    mp.confidence_percentage,
    mp.prediction_text
FROM matches m
JOIN teams t1 ON m.team1_id = t1.id
JOIN teams t2 ON m.team2_id = t2.id
JOIN events e ON m.event_id = e.id
LEFT JOIN match_predictions mp ON m.id = mp.match_id
LEFT JOIN teams tw ON mp.predicted_winner_id = tw.id
WHERE m.status = 'scheduled'
    AND m.scheduled_at > NOW()
ORDER BY m.scheduled_at;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤:
```sql
SELECT 
    COUNT(*) as total_predictions,
    COUNT(CASE WHEN is_correct = true THEN 1 END) as correct_predictions,
    ROUND(
        COUNT(CASE WHEN is_correct = true THEN 1 END)::decimal / 
        COUNT(CASE WHEN is_correct IS NOT NULL THEN 1 END) * 100, 2
    ) as accuracy_percentage,
    AVG(confidence_percentage) as avg_confidence
FROM match_predictions
WHERE is_correct IS NOT NULL;
```

## üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å**

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:
- **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏**: –í—Å–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∑–∞—â–∏—â–µ–Ω—ã FK constraints
- **–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **NOT NULL**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç NULL –∑–Ω–∞—á–µ–Ω–∏–π

### –ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
- `ON DELETE CASCADE`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–ø–∏—Å–µ–π
- `ON UPDATE CASCADE`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü –ø–æ –¥–∞—Ç–∞–º
2. **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤  
3. **–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**: –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
4. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–µ—Ä–µ–Ω–æ—Å —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∞—Ä—Ö–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- –ê–Ω–∞–ª–∏–∑ –ø–ª–∞–Ω–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü 